!function(){"use strict";const t=Modernizr.csstransforms3d,e=Modernizr.touch,n="http://www.w3.org/1999/xlink",s="xlink:href",i="flipped",o="win",l="fail",r="rotate",c=e?"touchstart":"click",a=document.getElementById("card_list"),u=Array.prototype.slice.call(document.querySelectorAll(".card"),0),d=u.length;let f,m=[],L=[],h=null,p=null,v=0,A=0;function b(e){if(e.classList.contains(i))return;const b=u.indexOf(e),w=L.indexOf(b),S=m[L[w]];S.front.setAttribute("title",S.name),S.front.children[0].setAttributeNS(n,s,"#"+S.name),setTimeout(()=>{h?p||(e.classList.add(i),p=e,setTimeout(()=>{!function(){if(A++,h.querySelectorAll(".front")[0].getAttribute("title")!==p.querySelectorAll(".front")[0].getAttribute("title")){h.classList.add(l),p.classList.add(l);const t=h,e=p;h=null,p=null,setTimeout((function(){!function(t,e){t.classList.remove(l),t.classList.remove(i),e.classList.remove(l),e.classList.remove(i),setTimeout(()=>{t.classList.contains(i)||y(t),e.classList.contains(i)&&y(e)},1e3)}(t,e)}),1e3)}else h.classList.add(o),p.classList.add(o),h=null,p=null,v+=2,v===d&&function(){a.classList.add(r);const t=document.createElement("div");t.classList.add("overlay"),t.innerHTML=`Comparisons: <strong>${A}</strong>.<br/>Click / Tap here to try again!`,f=function(){!function(t){let e=d-1;t.removeEventListener(c,f),t.parentNode.removeChild(t),a.classList.remove(r);do{const t=u[e];t.classList.remove(o),t.classList.remove(i),e--}while(e>-1);setTimeout(g,1e3)}(t)},t.addEventListener(c,f),a.parentElement.appendChild(t),setTimeout((function(){a.classList.remove(r)}),2e3)}()}()},t?1e3:100)):(e.classList.add(i),h=e)},10)}function y(t){const e=u.indexOf(t),o=L.indexOf(e),l=m[L[o]];t.classList.contains(i)||(l.front.setAttribute("title",""),l.front.children[0].setAttributeNS(n,s,""),m[L[o]]=l)}function g(){let t,e=[],i=null,o=d;A=0,v=0;do{i=Math.floor(Math.random()*(o+1)),-1===e.indexOf(i)&&(t=u[i],t&&(t.parentNode.removeChild(t),a.appendChild(t)),e.push(i))}while(e.length<=o);!function(){m=[],L=[];for(let t=0;t<d;t++){const e=u[t].querySelector(".front"),i=u[t].querySelector(".back"),o=u[t].querySelector(".inner");m.push({name:e.getAttribute("title"),front:e,back:i,inner:o}),e.setAttribute("title",""),e.children[0].setAttributeNS(n,s,""),L.push(t)}}()}function w(t,e){return t&&t.nodeName?t.nodeName.toLowerCase()===e?t:w(t.parentElement,e):null}function S(t){const e=w(t.target,"li");e&&(t.preventDefault(),"mousedown"!==t.type&&b(e))}g(),a.addEventListener(c,S),a.addEventListener("mousedown",S)}();